# 📖 图书管理系统 - 启动指南

## ✅ 依赖安装状态

所有Python依赖包已成功安装：
- ✅ Flask 3.0.0
- ✅ Flask-SQLAlchemy 3.1.1
- ✅ PyMySQL 1.1.0
- ✅ bcrypt 4.0.1
- ✅ python-dotenv 1.0.0
- ✅ SQLAlchemy 2.0.44

## 🚀 启动步骤

### 1. 启动MySQL数据库
确保MySQL服务已启动，并且已导入数据库：
```bash
mysql -u root -p < mysql_database.sql
```

### 2. 启动后端服务器（端口5000）

**方式1：直接启动**
```bash
cd backend
python app.py
```

**方式2：使用虚拟环境（推荐）**
```bash
cd backend
venv\Scripts\activate
python app.py
```

成功启动后会看到：
```
* Running on http://127.0.0.1:5000
```

### 3. 启动管理后台（端口5173）

**新开一个终端窗口：**
```bash
cd 图书后台管理
npm install    # 首次运行需要
npm run dev
```

### 4. 启动线上图书系统

**再开一个终端窗口：**
```bash
cd 线上图书系统
npm install    # 首次运行需要
npm run dev
```

## 🔗 访问地址

- **后端API**: http://localhost:5000/api
- **管理后台**: http://localhost:5173
- **线上图书系统**: 浏览器会自动打开

## 🧪 测试流程

### 测试管理后台
1. 访问 http://localhost:5173
2. 使用管理员账号登录：
   - 用户名：`admin`
   - 密码：`admin123`
3. 测试图书管理功能
4. 测试用户管理功能

### 测试线上图书系统
1. 浏览器会自动打开线上图书系统
2. 点击"登录/注册"
3. 注册新用户账号
4. 登录后浏览图书
5. 测试搜索和分类筛选
6. 查看图书详情
7. 添加图书到购物车

## ⚠️ 常见问题

### 问题1：端口占用
如果提示端口已被占用：
- 后端5000端口：修改 `backend/app.py` 中的端口号
- 前端端口：Vite会自动选择下一个可用端口

### 问题2：数据库连接失败
检查 `backend/.env` 文件中的数据库配置：
```
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=你的密码
DB_NAME=bookstore_management_system
```

### 问题3：前端无法连接后端
1. 确认后端已启动在5000端口
2. 检查浏览器控制台是否有CORS错误
3. 清除浏览器缓存重试

### 问题4：Python导入错误
重新安装依赖：
```bash
cd backend
pip install -r requirements.txt
```

## 📊 API端点测试

使用浏览器或Postman测试：

**健康检查：**
```
GET http://localhost:5000/api/health
```

**获取所有图书：**
```
GET http://localhost:5000/api/books
```

**用户登录：**
```
POST http://localhost:5000/api/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

**用户注册：**
```
POST http://localhost:5000/api/register
Content-Type: application/json

{
  "username": "testuser",
  "email": "test@example.com",
  "password": "123456"
}
```

## 🎯 功能完成度

### 管理后台（100%）
- ✅ 管理员登录
- ✅ 用户管理（增删改查）
- ✅ 图书管理（增删改查）
- ✅ 统计数据展示
- ✅ 实时通知

### 线上图书系统（100%）
- ✅ 用户注册
- ✅ 用户登录
- ✅ 图书浏览（从数据库加载）
- ✅ 图书详情（从数据库加载）
- ✅ 分类筛选
- ✅ 搜索功能
- ✅ 购物车功能

## 📝 开发笔记

### 数据库表结构
- `users` - 用户表
- `books` - 图书表
- `categories` - 分类表
- `permissions` - 权限表
- `role_permissions` - 角色权限表
- `operation_logs` - 操作日志表
- `sales_records` - 销售记录表
- `reviews` - 评论表

### 技术栈
**后端：**
- Python 3.8+
- Flask 3.0
- SQLAlchemy 2.0
- PyMySQL
- MySQL

**前端：**
- Vue 3
- TypeScript
- Vite 7
- Element Plus
- Axios

## 🔐 默认账号

### 管理后台
- 用户名：`admin`
- 密码：`admin123`
- 角色：管理员

### 线上图书系统
需要自行注册新账号

## 💡 提示

1. 建议按顺序启动：数据库 → 后端 → 前端
2. 首次运行需要等待npm安装依赖
3. 开发时保持三个终端窗口同时运行
4. 修改代码后Vite会自动热更新，Flask需要手动重启

## 🎉 恭喜！

你的图书管理系统已经可以正常使用了！

如有问题，请检查：
1. MySQL服务是否启动
2. 数据库是否正确导入
3. Python依赖是否安装完整
4. Node.js依赖是否安装完整
5. 端口是否被占用

祝您使用愉快！🚀
