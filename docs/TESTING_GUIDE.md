# 线上图书系统测试指南

## 完整购物流程测试

### 前置条件
1. 确保后端服务器正在运行（默认端口：3000）
2. 确保前端开发服务器正在运行：`npm run dev`
3. 数据库已正确配置并包含测试数据

### 测试步骤

#### 1. 用户注册和登录测试

**注册流程：**
1. 访问 http://localhost:5173
2. 点击导航栏右上角的"登录/注册"按钮
3. 在登录页面点击"注册"按钮
4. 填写注册信息：
   - 用户名：testuser
   - 邮箱：test@example.com
   - 密码：Test123456
5. 点击"立即注册"
6. 验证：显示"注册成功"提示信息

**登录流程：**
1. 在登录页面输入刚注册的账号信息
2. 点击"立即登录"
3. 验证：
   - 页面跳转到首页
   - 导航栏右上角显示用户名和下拉菜单
   - 用户名显示为"testuser"

#### 2. 浏览和搜索图书测试

**浏览图书：**
1. 在首页滚动查看图书列表
2. 验证：
   - 图书卡片正确显示封面、标题、作者、价格
   - 图书卡片有悬停效果

**搜索图书：**
1. 在导航栏搜索框输入关键词（如："Vue"）
2. 点击搜索按钮或按回车键
3. 验证：
   - 图书列表过滤显示相关结果
   - 搜索无结果时显示提示信息

#### 3. 添加购物车测试

**添加商品：**
1. 点击图书卡片上的"加入购物车"按钮
2. 验证：
   - 显示"已加入购物车"成功提示
   - 右侧购物车图标的小红点数量增加
   - 如果未登录，应跳转到登录页面

**查看购物车：**
1. 点击右侧的购物车图标
2. 验证：
   - 购物车侧边栏从右侧滑出
   - 显示已添加的图书信息（封面、标题、作者、价格、数量）
   - 显示总价

#### 4. 购物车管理测试

**增加数量：**
1. 在购物车中点击某商品的"+"按钮
2. 验证：
   - 数量增加1
   - 总价更新
   - 购物车图标小红点数量更新

**减少数量：**
1. 点击某商品的"-"按钮
2. 验证：
   - 数量减少1
   - 当数量为1时，"-"按钮禁用
   - 总价更新

**删除商品：**
1. 点击某商品的删除按钮（红色垃圾桶图标）
2. 验证：
   - 商品从购物车移除
   - 显示"已从购物车移除"提示
   - 总价更新
   - 购物车图标小红点数量更新

**库存限制测试：**
1. 尝试增加商品数量超过库存
2. 验证：
   - 显示"已达库存上限"提示
   - 数量不再增加

#### 5. 下单流程测试

**提交订单：**
1. 确保购物车中有商品
2. 点击"立即结算"按钮
3. 在弹出的对话框中输入收货信息：
   ```
   张三
   13800138000
   北京市朝阳区XX路XX号
   ```
4. 点击"提交订单"
5. 验证：
   - 显示订单提交成功提示，包含订单号和总金额
   - 购物车清空
   - 购物车图标小红点消失

**订单提交失败处理：**
1. 输入不完整的收货信息（少于3行）
2. 点击"提交订单"
3. 验证：
   - 显示"请按格式输入完整的收货信息"错误提示
   - 订单未创建

#### 6. 用户状态管理测试

**查看用户菜单：**
1. 点击右上角用户名下拉菜单
2. 验证：
   - 显示"我的订单"选项
   - 显示"退出登录"选项

**退出登录：**
1. 点击"退出登录"
2. 在确认对话框点击"确定"
3. 验证：
   - 显示"已退出登录"提示
   - 导航栏恢复显示"登录/注册"按钮
   - 购物车清空
   - 购物车图标小红点消失

**登录状态持久化：**
1. 登录账号
2. 刷新页面
3. 验证：
   - 用户保持登录状态
   - 用户名仍然显示在导航栏
   - 购物车数据从后端加载

#### 7. 异常情况测试

**网络错误处理：**
1. 停止后端服务器
2. 尝试添加商品到购物车
3. 验证：显示"添加到购物车失败"错误提示

**未登录访问保护：**
1. 未登录状态下点击"加入购物车"
2. 验证：
   - 显示"请先登录"提示
   - 自动跳转到登录页面

**空购物车结算：**
1. 清空购物车
2. 点击"立即结算"按钮
3. 验证：显示"购物车为空"警告提示

#### 8. UI/UX 测试

**响应式设计：**
1. 调整浏览器窗口大小
2. 验证：
   - 导航栏适应不同屏幕宽度
   - 图书卡片布局自适应
   - 购物车在移动端全屏显示

**动画效果：**
1. 观察各种交互的动画效果
2. 验证：
   - 购物车滑出/滑入动画流畅
   - 按钮悬停效果正常
   - 页面滚动时"回到顶部"按钮平滑出现

**返回顶部按钮：**
1. 向下滚动页面超过300px
2. 验证：
   - "回到顶部"按钮出现
   - 点击按钮平滑滚动到页面顶部

### 预期结果

完成以上所有测试步骤后，应该验证：

✅ 用户注册和登录功能正常
✅ 图书浏览和搜索功能正常
✅ 购物车增删改查功能正常
✅ 订单提交流程完整
✅ 用户登录状态正确显示和管理
✅ 错误处理机制完善
✅ UI交互流畅美观

### 常见问题排查

**问题1：加入购物车后图标数量不更新**
- 检查浏览器控制台是否有JavaScript错误
- 确认购物车API调用成功
- 验证事件监听器正确注册

**问题2：登录后购物车为空**
- 检查后端API是否正确返回用户购物车数据
- 确认user_id正确存储在localStorage
- 查看网络请求是否携带正确的参数

**问题3：下单失败**
- 检查订单API接口是否正常
- 验证收货信息格式是否正确
- 查看后端数据库连接是否正常

**问题4：页面样式异常**
- 清除浏览器缓存重新加载
- 检查CSS文件是否正确加载
- 验证scoped样式是否正确应用

### 性能测试

1. **页面加载速度：** 首次加载应在3秒内完成
2. **API响应时间：** 各API接口响应应在500ms内
3. **动画流畅度：** 所有动画应保持60fps
4. **内存占用：** 长时间使用不应有明显的内存泄漏

### 浏览器兼容性测试

建议在以下浏览器中测试：
- Chrome (最新版本)
- Firefox (最新版本)
- Edge (最新版本)
- Safari (最新版本)

---

## 测试完成标准

当所有测试步骤通过，且没有发现严重bug时，可以认为购物流程测试完成。

记得在测试过程中：
- 📝 记录所有发现的bug
- 🔍 注意用户体验细节
- 💡 提出改进建议
- ✨ 验证所有边界条件
